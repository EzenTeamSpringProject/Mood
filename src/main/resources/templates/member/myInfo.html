<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>Mood</title>
		<link rel="shortcut icon" href="/img/letter-m.png" type="image/x-icon"/>
		<link
			href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;700&display=swap"
			rel="stylesheet"
		/>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		        crossorigin="anonymous"></script>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
		      crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="/css/style.css"/>
		<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css"/>
		
		<script
			src="https://kit.fontawesome.com/072f44ed92.js"
			crossorigin="anonymous"
		></script>
	</head>
	
	<body>
		<header>
			<div class="logo">
				<a href="/" style="text-decoration: none;color: #2196f3;">Mood</a>
			</div>
			<div class="member">
				<div id="profile">
					<button>
						<img th:src="${session.member.picture}"/>
					</button>
					<ul id="dropDown" class="hidden">
						<li><a href="/member/reviews/write" style="text-decoration: none">새 글 작성</a></li>
						<li><a href="/member" style="text-decoration: none">마이페이지</a></li>
						<li><a href="/auth/logout" style="text-decoration: none">로그아웃</a></li>
					</ul>
				</div>
			</div>
		</header>
		
		<!-- Navbar -->
		<nav>
			<ul class="nav nav-tabs">
				<li class="nav-item">
					<a class="nav-link" th:classappend="${#strings.equals(category,'wishContent')}? active:''"
					   href="/member/contents"><h5 style="font-weight: 600">내가 찜한 컨텐츠</h5></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" th:classappend="${#strings.equals(category,'wishReview')}? active:''"
					   href="/member/reviews/other"><h5 style="font-weight: 600">내가 찜한 리뷰</h5></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" th:classappend="${#strings.equals(category,'myReview')}? active:''"
					   href="/member/reviews"><h5 style="font-weight: 600">내가 쓴 리뷰</h5></a>
				</li>
				<li class="nav-item">
					<a class="nav-link " th:classappend="${#strings.equals(category,'myInfo')}? active:''"
					   href="/member/info"><h5 style="font-weight: 600">내 정보 관리</h5></a>
				</li>
			</ul>
		</nav>
		
		<main style="margin-top: 30px">
			<section>
				<div class="profile">
					<div class="image">
						<img th:src="${session.member.picture}"/>
					
					</div>
					<div style="display: flex;flex-direction: column;align-items: center">
						<form action="/member/info/edit/image" method="post" enctype="multipart/form-data" style="display: flex; flex-direction: column;align-items: center">
							<input type="file" name="image">
							<button class="profileBtn btn btn-primary btn-sm" style="display: block">이미지 업로드</button>
						</form>
						<button class="profileBtn btn btn-light btn-sm"
						        onclick="location.href='/member/info/edit/image/default'">이미지 제거
						</button>
					</div>
				</div>
				<div class="info">
					<h1 th:text="${session.member.name}">이름</h1>
					<form action="/member/info/edit" method="post" class="hidden">
						<input type="text" name="name" th:value="${session.member.name}" placeholder="이름"/>
						<input type="text" name="password" placeholder="새로운 비밀번호 입력"/>
						<div>
							<button class="btn btn-primary btn-sm" type="submit" style="margin-top: 8px">저장</button>
						</div>
					</form>
					<button class="btn btn-primary btn-sm edit">수정</button>
				</div>
				<div class="quit">
					<span>회원 탈퇴</span>
					<button class="btn btn-warning btn-sm" onclick="location.href='/member/delete'">회원 탈퇴</button>
				</div>
			</section>
		</main>
		<script>
			const editBtn = document.querySelector('.edit');
			const infoForm = document.querySelector('.info form');
			const name = document.querySelector('.info h1');
			
			
			function handleEditBtn() {
				infoForm.classList.remove('hidden');
				name.classList.add('hidden');
				
				editBtn.style.display = 'none';
			}
			
			editBtn.addEventListener('click', handleEditBtn);
		</script>
		
		
		<script src="../js/main.js"></script>
	
	</body>
</html>